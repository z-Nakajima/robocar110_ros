<launch>
    <arg name="use_front_camera" default="true"/>
    <arg name="use_rear_camera" default="false"/>

    <group if="$(arg use_front_camera)">
        <node pkg="usb_cam" type="usb_cam_node" name="front_camera">
            <param name="camera_frame_id" value="front_camera"/>
            <param name="video_device" value="/dev/video_front"/>
            <param name="pixel_format" value="uyvy"/>
            <param name="framerate" value="30.0"/>
            <param name="image_width" value="640"/>
            <param name="image_height" value="480"/>
            <param name="io_method" value="mmap"/>
            <param name="camera_info_url" value="$(env HOME)/.config/rc110/calibration/front_camera.yaml"></param>
        </node>
    </group>

    <group if="$(arg use_rear_camera)">
        <node pkg="usb_cam" type="usb_cam_node" name="rear_camera">
            <param name="camera_frame_id" value="rear_camera"/>
            <param name="video_device" value="/dev/video_rear"/>
            <param name="pixel_format" value="uyvy"/>
            <param name="framerate" value="30.0"/>
            <param name="image_width" value="640"/>
            <param name="image_height" value="480"/>
            <param name="io_method" value="mmap"/>
            <param name="camera_info_url" value="$(env HOME)/.config/rc110/calibration/rear_camera.yaml"></param>
        </node>
    </group>

    <node pkg="hokuyo_node" type="hokuyo_node" name="front_lidar">
        <param name="port" value="/dev/hokuyo_front"/>
        <param name="frame_id" value="front_lidar"/>
        <param name="min_ang" value="-2.08"/>
        <param name="max_ang" value="2.08"/>
        <remap from="scan" to="~scan"/>
    </node>

    <node pkg="hokuyo_node" type="hokuyo_node" name="rear_lidar">
        <param name="port" value="/dev/hokuyo_rear"/>
        <param name="frame_id" value="rear_lidar"/>
        <remap from="scan" to="~scan"/>
        <param name="min_ang" value="-2.08"/>
        <param name="max_ang" value="2.08"/>
    </node>

    <node pkg="imu_complementary_filter" type="complementary_filter_node" name="complementary_filter_node" output="screen">
      <param name="do_bias_estimation" value="true"/>
      <param name="do_adaptive_gain" value="true"/>
      <param name="gain_acc" value="0.01"/>
    </node>
</launch>
